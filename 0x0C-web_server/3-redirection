#!/usr/bin/env bash

# Update package lists
apt update

# Install Nginx web server
apt install -y nginx

# Redirect configuration
REDIRECT_URL="https://github.com/CJ-ONYERO99?tab=repositories"

# Backup the original configuration (optional)
cp /etc/nginx/sites-available/default /etc/nginx/sites-available/default.bak

# Use sed to modify server block configuration for redirection
sed -i '/server {/a \
  location /redirect_me { \
    return 301 $REDIRECT_URL; \
  } \
' /etc/nginx/sites-available/default

# Reload Nginx configuration
service nginx reload

# Test the redirection with curl
curl -sI http://localhost/redirect_me/

echo "Redirection configured for /redirect_me to $REDIRECT_URL"
